JIRA Bug Ticket: Incorrect Certificate SANs in ACM (Linked to EMBER-517)

Title:

Incorrect Subject Alternative Names (SANs) in ACM for Certificates

Description:

While testing EMBER-517 (Test Certificates), we identified an issue where wildcard (*.) subdomains were being incorrectly added to certificates in AWS Certificate Manager (ACM). Additionally, Mock SLA Server certificates inherited staging subdomains, which was unintended. This led to unnecessary domain permissions and misconfigured certificates.

Acceptance Criteria:

âœ… Certificate Stack should correctly pass subjectAlternativeNames from the stack, avoiding wildcard entries.
âœ… Mock SLA Server certificates should be issued with only the required domain (mock-slal.poc.welcome.standardlife.co.uk) and no additional SANs.
âœ… ACM certificates should reflect only the expected domains as per environment requirements.
âœ… Tests should validate that SubjectAlternativeNames is correctly set or omitted when not needed.

ðŸ“Œ Fix implemented, tested, and verified. ðŸš€



Comment for EMBER-517 (Test Certificates Ticket):

Tested the certificates as part of this story and identified an issue where wildcard (*.) subdomains were incorrectly added to ACM certificates. This led to unnecessary domain permissions and incorrect certificate configurations.

Created a separate bug ticket to track this issue and currently working on the fix.

Also, documented the test scenarios and in progress with validation. Once the issue is fixed, I will update the test document accordingly and attach it here in Jira as per the template.


---

Comment for the New Bug Ticket:

Implemented the necessary CDK changes to ensure certificates are issued with the correct Subject Alternative Names (SANs). The fix includes updating the Certificate Stack, creating a separate Mock SLA Certificate Stack, and refining unit tests.

Currently, the changes are yet to be fully tested. Will proceed with validation and update the ticket accordingly. ðŸš€

